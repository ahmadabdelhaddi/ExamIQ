let questionAll = [
  {
    q: "What is the plural form of child?",

    a: "childs",
    b: "children",
    c: "childes ",
    d: "cildren",
    correctAnswer: function () {
      return this.b;
    },
  },
  {
    q: "Which word is the opposite of brave?",

    a: " fearless",
    b: "timid",
    c: "courageous",
    d: "daring",
    correctAnswer: function () {
      return this.b;
    },
  },
  {
    q: "What is the correct spelling?",

    a: " Neccessary",
    b: " Necesary",
    c: " Necessarry",
    d: "  Necessary",
    correctAnswer: function () {
      return this.d;
    },
  },

  {
    q: "Choose the correct sentence:",

    a: "The cat lays on the mat.",
    b: "The cat lies on the mat.",
    c: "The cat lied on the mat.",
    d: "The cat lain on the mat.",
    correctAnswer: function () {
      return this.b;
    },
  },

  {
    q: "What is the past tense of sing?",

    a: " sang",
    b: "sung",
    c: " singed",
    d: " sings",
    correctAnswer: function () {
      return this.a;
    },
  },

  {
    q: "Which word is a noun?",

    a: " happy",
    b: "quickly",
    c: "apple",
    d: " slowly",
    correctAnswer: function () {
      return this.c;
    },
  },

  {
    q: "What is the comparative form of good?",

    a: " goodest",
    b: " gooder",
    c: "better",
    d: "well",
    correctAnswer: function () {
      return this.c;
    },
  },

  {
    q: "Choose the correctly punctuated sentence:",

    a: " My friends like going to the movies; I prefer reading books.",
    b: " My friends like going to the movies, I prefer reading books.",
    c: " My friends like going to the movies, I prefer reading books.",
    d: " My friends, like going to the movies I prefer reading books.",
    correctAnswer: function () {
      return this.a;
    },
  },

  {
    q: "What is the synonym for angry?",

    a: "happy",
    b: "sad",
    c: "mad",
    d: "calm",
    correctAnswer: function () {
      return this.c;
    },
  },

  {
    q: "Identify the correct subject-verb agreement:",

    a: " The dogs is barking loudly.",
    b: "  The dog is barking loudly.",
    c: "The dog are barking loudly.",
    d: " The dogs are barking loudly.",
    correctAnswer: function () {
      return this.b;
    },
  },

  {
    q: "What is the comparative form of far?",

    a: " farther",
    b: "more far",
    c: "farer",
    d: "farrer",
    correctAnswer: function () {
      return this.a;
    },
  },

  {
    q: "Which sentence is in the active voice?",

    a: " The cake was eaten by her.",
    b: " She ate the cake.",
    c: " The cake is being eaten by her.",
    d: "The cake has been eaten by her.",
    correctAnswer: function () {
      return this.b;
    },
  },

  {
    q: "Choose the correct possessive form:",

    a: "Sara's pen's ink is blue.",
    b: "Sara's pens' ink is blue",
    c: " Saras' pen's ink is blue.",
    d: "Sara's pens's ink is blue.",
    correctAnswer: function () {
      return this.a;
    },
  },

  {
    q: "What is the superlative form of big?",

    a: "biger",
    b: "bigest",
    c: "biggest",
    d: "more big",
    correctAnswer: function () {
      return this.c;
    },
  },

  {
    q: "Identify the correct sentence structure:",

    a: "Me and my brother are going to the park",
    b: ") My brother and me are going to the park.",
    c: " My brother and I are going to the park",
    d: " I and my brother are going to the park.",
    correctAnswer: function () {
      return this.c;
    },
  },

  {
    q: "What is the synonym for beautiful?",

    a: " ugly",
    b: "pretty",
    c: "nice",
    d: "lovely",
    correctAnswer: function () {
      return this.b;
    },
  },

  {
    q: "Choose the correctly spelled word:",

    a: "reseive",
    b: "recieve",
    c: "receive",
    d: "recive",
    correctAnswer: function () {
      return this.c;
    },
  },

  {
    q: "Which sentence is in the present perfect tense?",

    a: " I will go to the store tomorrow.",
    b: " I went to the store yesterday.",
    c: " I go to the store every day.",
    d: " I have gone to the store.",
    correctAnswer: function () {
      return this.d;
    },
  },

  {
    q: "Identify the correct indefinite article:",

    a: "an car",
    b: "an cat ",
    c: "a car ",
    d: "a cat",
    correctAnswer: function () {
      return this.c;
    },
  },

  {
    q: "What is the plural form of goose?",

    a: " gooses",
    b: "geese",
    c: "goosies",
    d: "goose",
    correctAnswer: function () {
      return this.b;
    },
  },

  {
    q: "Choose the correct sentence:",

    a: " I must to leave now ",
    b: " I have to leave now",
    c: "I must leave now ",
    d: "I have must leave now ",
    correctAnswer: function () {
      return this.b;
    },
  },

  {
    q: "What is the comparative form of bad?",

    a: " baddest",
    b: " badder",
    c: "worse",
    d: "more bad",
    correctAnswer: function () {
      return this.c;
    },
  },

  {
    q: "Identify the correct article",

    a: " a unicorn",
    b: "an unicorn",
    c: " the unicorn",
    d: " unicorn",
    correctAnswer: function () {
      return this.a;
    },
  },

  {
    q: "Which word is a verb?",

    a: " quickly",
    b: " book",
    c: "run",
    d: "lovely",
    correctAnswer: function () {
      return this.c;
    },
  },

  {
    q: "What is the synonym for happy?",

    a: "sad",
    b: "angry",
    c: " joyful",
    d: " tired ",
    correctAnswer: function () {
      return this.c;
    },
  },

  {
    q: "Choose the correctly punctuated sentence:",

    a: "I like to swim in the ocean; it's refreshing",
    b: " I like to swim in the ocean, it's refreshing",
    c: " I like to swim in the ocean, it's refreshing.",
    d: "  I like to swim in the ocean it's refreshing",
    correctAnswer: function () {
      return this.a;
    },
  },

  {
    q: "What is the past tense of eat?",

    a: "eated",
    b: "eat",
    c: "ate",
    d: " eaten",
    correctAnswer: function () {
      return this.c;
    },
  },

  {
    q: "Which sentence is in the passive voice?",

    a: "He wrote a letter.",
    b: " A letter was written by him.",
    c: "He is writing a letter.",
    d: "  A letter has been written by him",
    correctAnswer: function () {
      return this.b;
    },
  },

  {
    q: "Choose the correct form of to be for the pronoun he",

    a: "am",
    b: " is",
    c: " are",
    d: " be",
    correctAnswer: function () {
      return this.b;
    },
  },

  {
    q: "Which word is an adjective?",

    a: "quickly",
    b: "book",
    c: "run",
    d: " beautiful",
    correctAnswer: function () {
      return this.d;
    },
  },
];

// Nav Bar
let Btn=document.getElementsByClassName("hum");
let links = document.getElementsByClassName("links");
Btn[0].addEventListener("click",()=>{
    if(links[0].style.display =="none"){
        links[0].style.display ="block"
    }
    else{
        links[0].style.display ="none"
    }
})
 window.addEventListener("resize", function () {
   if (window.innerWidth < 650) {
     var links = document.getElementsByClassName("links");
     if (links.length > 0) {
       links[0].style.display = "none";
     }
   }
 });
// End Nav Bar


let use=  JSON.parse(localStorage.getItem('users'));




// Start local Storage && LOGOUT


let users = JSON.parse(localStorage.getItem("users"));

document.getElementById("logout").addEventListener("click", () => {
  for (let i = 0; i < users.length; i++) {
    if (users[i].isSign == true) users[i].isSign = false;
    localStorage.setItem("users", JSON.stringify(users));
    window.location.replace("../index.html");
  }
});

// document.getElementById("logou").addEventListener("click", () => {
//   for (let i = 0; i < users.length; i++) {
//     if (users[i].isSign == true) users[i].isSign = false;
//     localStorage.setItem("users", JSON.stringify(users));
//     window.location.replace("../index.html");
//   }
// });
// End local Storage






// Random function
let questions = [];
while (questions.length < 15) {
  let q = qRandom(questionAll);
  if (!questions.includes(q)) {
    questions.push(q);
  }
}

function qRandom(array) {
  return array[Math.floor(Math.random() * array.length)];
}

console.log(questions);
// End Random function

let correct = [];
for (i = 0; i < questions.length; i++) {
  correct[i] = questions[i].correctAnswer();
}

// Time function
//set interval & clearinterval
//1s == 1000ms
let timeLeft = 1200;
let minute = 19;
let second = 60;

let interval = setInterval(() => {
  timeLeft--;
  second--;
  if (second == 0 && minute > 0) {
    second = 60;
    minute--;
  }
  if (minute == 0 && second == 0) {
    clearInterval(interval);
    window.location.replace("tasks.html");

    //disable all answer
    // document.getElementById('answers').style.pointerEvents="none";
  }
  document.getElementById("second").innerHTML = second;
  document.getElementById("minute").innerHTML = minute;
}, 1000);

// End Time
// Technical Test ###########################
var countQuestion = 0;
let user_answers = [];
let score = 0;
let input = document.getElementsByClassName("input");

let Num_questions = document.getElementById("Num-questions");
let answer = document.getElementsByClassName("options");

let btn = document.getElementById("next-btn");
let question = document.getElementById("question");

nextQuestion();

btn.addEventListener("click", () => {
  checkAnswer(); // Check the answer before moving to the next question
  nextQuestion();
});

function nextQuestion() {
  let NumOfquestion = countQuestion + 1;

  if (countQuestion < questions.length) {
    Num_questions.innerHTML = "Q " + NumOfquestion + "/" + questions.length;
    question.innerHTML = questions[countQuestion].q;

    answer[0].textContent = questions[countQuestion].a;
    answer[1].textContent = questions[countQuestion].b;
    answer[2].textContent = questions[countQuestion].c;
    answer[3].textContent = questions[countQuestion].d;

    input[0].value = questions[countQuestion].a;
    input[1].value = questions[countQuestion].b;
    input[2].value = questions[countQuestion].c;
    input[3].value = questions[countQuestion].d;

    if(countQuestion == questions.length-1 ){
      btn.innerHTML = "Finish"

    }
  } else {
    final()
    
    window.location.replace("tasks.html");

    return; // Exit the function if there are no more questions
  }
}




function final(){

    for(let i=0 ; i<use.length ; i++){
      if (use[i].isSign==true ){
        use[i].englishScore = score
        use[i].englishComplete = true

        localStorage.setItem('users',JSON.stringify(use))

      }

    }
}


function checkAnswer() {
  if (input[0].checked) {
    user_answers.push(input[0].value);
    input[0].checked = false; // Clear the checked state
  } else if (input[1].checked) {
    user_answers.push(input[1].value);
    input[1].checked = false; // Clear the checked state
  } else if (input[2].checked) {
    user_answers.push(input[2].value);
    input[2].checked = false; // Clear the checked state
  } else if (input[3].checked) {
    user_answers.push(input[3].value);
    input[3].checked = false; // Clear the checked state
  }

  if (user_answers[countQuestion] == correct[countQuestion]) {
    score++;
  }

  countQuestion++;
}
